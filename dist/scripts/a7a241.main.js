!function(){define("libs/url-parser",[],function(){"use strict";function a(a,b,d){if("undefined"!=typeof b){var e=a.match(c);e?(a=e[1],e[2]?(d[a]=d[a]||{},d[a][e[2]]=b):(d[a]=d[a]||[],d[a].push(b))):d[a]=b}}function b(b){var c=document.createElement("a");return c.href=b,{source:b,protocol:c.protocol.replace(":",""),host:c.hostname,port:c.port?parseInt(c.port,10):80,query:c.search.replace("?",""),params:function(){for(var b,d={},e=c.search.substr(1).split("&"),f=e.length,g=0;f>g;g++)e[g]&&(b=e[g].split("="),a(b[0],b[1],d));return d}(),file:(c.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:c.hash.replace("#",""),path:c.pathname.replace(/^([^\/])/,"/$1")}}var c=/([-_\w]+)\[([-_\w]*)\]/;return b}),define("libs/env",["libs/url-parser"],function(a){"use strict";var b={},c=a(location.href),d=c.host;return b.url=c,b.isStaging="staging.llsapp.com"===d,b.isLocal=0===d.indexOf("localhost")||0===d.indexOf("192.168"),b.isOnline=!b.isLocal&&!b.isStaging,b}),"undefined"==typeof _gaq&&(_gaq=[]),define("libs/stat",["libs/env"],function(a){"use strict";var b,c=_gaq,d={};return b={gaTrack:function(d,e,f,g){var h=arguments[arguments.length-1];"string"!=typeof f&&(f=void 0),"number"!=typeof g&&(g=void 0),c&&c.push&&a.isOnline&&c.push(["_trackEvent",d,e,f,g]),b.local.info("GA#_trackEvent "+d+" "+e),"function"==typeof h&&(c&&c.push?setTimeout(h,200):h())},log:function(b,c,d,e,f){var g="http://fcbst.sinaapp.com/log.php?from="+encodeURIComponent(c)+"&type="+encodeURIComponent(b);"undefined"!=typeof d&&(g+="&msg="+encodeURIComponent(d)),"undefined"!=typeof e&&(g+="&data="+encodeURIComponent(JSON.stringify(e))),(a.isOnline||f)&&((new Image).src=g+"&_="+Date.now());var h="Stat#log:\n Category [%s]\n Msg [%s]\n Data [%o]";console[console[b]?b:"log"](h,c,d,e)},remote:function(a,c,d){d=d||{},d.url=location.href,d.ua=navigator.userAgent,b.log(a,"remote-message",c,d,!0)}},b.local={},function(){function c(a,b,c){var d=a.innerText?"innerText":"textContent";a[d]=c||void 0===c?a[d]+"\r\n"+b:b}var d=(a.url.params.debug||"0").toString().toLowerCase(),e={"true":1,yes:1,all:1,success:2,info:3,log:4,warn:5,error:6};d=d in e?e[d]:parseInt(d)||0;var f=function(a){var b=document.querySelector(".__debug");b||(b=document.createElement("div"),b.className="__debug",(document.getElementById("root")||document.body).appendChild(b));var f=document.createElement("div");return f.className=a,b.appendChild(f),function(){if(1>d||d>e[a])return!1;var b=[].slice.call(arguments,0),g=[],h=!0;"boolean"==typeof b[b.length-1]&&(h=b.pop()),b.forEach(function(a){if("object"==typeof a)try{a=JSON.stringify(a)}catch(b){a=a.toString()}g.push(a)}),c(f,g.join(", "),h)}};for(var g in e)e[g]<2||(b.local[g]=f(g))}(),window.onerror=function(a,c,e){if(!d.onbeforeunload){if("object"==typeof a){var f=a;e=f.line,a=f.message?f.name+": "+f.message:f.toString()}b.local.error(a,c,e),b.log("error","js-error",a,{url:location.href,src:c,line:e,ua:navigator.userAgent})}return!0},window.onbeforeunload=function(){d.onbeforeunload=!0},b}),define("libs/utils",[],function(){"use strict";var a={_:function(a,b){return(b||document).querySelector(a)},__:function(a,b){return[].slice.call((b||document).querySelectorAll(a))},extend:function(b,c){b=b||{};for(var d,e=1;e<arguments.length;++e)if(c=arguments[e])for(d in c)c.hasOwnProperty(d)&&("object"==typeof c[d]?a.extend(b[d],c[d]):b[d]=c[d]);return b},appendQuery:function(a,b){if(""===b)return a;var c=a.split("#");return(c[0]+"&"+b).replace(/[&?]{1,2}/,"?")+(2===c.length?"#"+c[1]:"")},delay:function(a,b){setTimeout(b,a)},random:function(a,b){return"undefined"==typeof b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},shuffle:function(b){for(var c,d,e=[],f=0;f<b.length;f++)d=b[f],c=a.random(f),e[f]=e[c],e[c]=d;return e},toString:function(a){return Object.prototype.toString.call(a)},type:function(b){return a.toString(b).replace(/^\[object (.+)\]$/,"$1").toLowerCase()},onInputChange:function(a,b){function c(){b&&b(a.value.trim())}a.addEventListener("change",c,!1),a.addEventListener("keyup",c,!1)},elemText:function(a,b){var c=a.innerText?"innerText":"textContent";return"undefined"==typeof b?a[c]:a[c]=b},contains:function(a,b){return a!==b&&a.contains(b)},empty:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},offet:function(a){var b=a.getBoundingClientRect();return{top:b.top+document.body.scrollTop,left:b.left+document.body.scrollLeft}},escapeHTML:function(a){var b=document.createElement("div"),c=document.createTextNode(a);return b.appendChild(c),b.innerHTML},parseHTML:function(a,b){var c=document.createElement("div");return c.innerHTML=a,b===!1?c.children:c.firstChild},render:function(b,c,d,e){return e="undefined"==typeof e?!0:!!e,d="undefined"==typeof d?!0:!!d,b=b.replace(/#\{([\w\-_]+)\}/g,function(b,d){return d in c?e?a.escapeHTML(c[d]):c[d]:""}),d||(b=b.replace(/#\{&([\w\-_]+)\s*\?\s*([^:]*?)\s*:\s*([^\}]*?)\s*\}/g,function(a,b,d,e){return c[b]?d:e}),b=b.replace(/#\{&repeat\s+([\w\-_]+)\s+([^\}]*?)\}/g,function(b,d,f){var g="";return d in c&&Array.isArray(c[d])&&c[d].forEach(function(b){g+=a.render(f,b,!0,e)}),g})),b},insertCSSCode:function(a){var b=document.createElement("style");b.type="text/css",b.media="screen",b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a)),document.getElementsByTagName("head")[0].appendChild(b)},css:function(a,b,c){var d,e;return d="undefined"==typeof c?window.getComputedStyle(a,null):a.style,b in d||["Webkit","O","Moz","ms"].forEach(function(a){e=a+b.charAt(0).toUpperCase()+b.substr(1),e in d&&(b=e)}),"undefined"==typeof c?d[b]:d[b]=c},circle:function(a,b){return(b+a%b)%b}};return a}),define("libs/storage",[],function(){"use strict";var a=window.localStorage;return{set:function(b,c){a&&(a[b]=c)},get:function(b){return a&&a[b]},del:function(b){a&&a.removeItem(b)}}}),define("libs/Agent",["libs/storage"],function(a){"use strict";var b=navigator.userAgent,c={};return c.isIOS=/iP(ad|hone|od)/.test(b),c.isAndroid=/Android/i.test(b),c.isOthers=!c.isIOS&&!c.isAndroid,c.platform={},c.platform.wechat=/MicroMessenger/i.test(b),c.platform.lls=!!a.get("token"),c}),define("libs/native",[],function(){"use strict";return{share:function(a,b){window.location.href="lls://share/"+encodeURIComponent(a)+"/"+encodeURIComponent(b)},back:function(){window.location.href="lls://back"},addModule:function(a){window.location.href="lls://module/"+a+"/add"}}}),define("libs/audio-player",[],function(){"use strict";var a=function(){function a(){return f||(f=document.getElementById(h),f||(f=document.createElement("audio"),f.id=h,document.body.appendChild(f),f.addEventListener("ended",b,!1))),f}function b(){f&&f.pause(),g&&(g.classList.remove("stop"),g=null),d&&d.call(null)}function c(c){if(a(),g===c)f.play();else{var d=c.getAttribute("data-src");d&&(c.classList.add("stop"),b(),f.src=d,f.play(),g&&g.classList.remove("stop"))}g=c}var d,e,f,g,h="__player_id__";return document.addEventListener("click",function(a){var d=a.target,f=d.classList;f.contains("audio-control")&&!f.contains("disabled")&&(f.contains("stop")?(b(),f.remove("stop")):(e&&e.call(null),c(d)))},!1),{play:c,stop:b,setVolume:function(b){var c=a();c.volume&&(c.volume=b)},onPlay:function(a){return e=a,this},onEnd:function(a){return d=a,this}}}();return a}),define("init",["libs/utils","libs/Agent","libs/storage","libs/native","libs/audio-player"],function(a,b,c,d){"use strict";function e(){var a=null;["webkitApplicationCache","mozApplicationCache","msApplicationCache","applicationCache"].forEach(function(b){b in window&&(a=window[b])}),a&&window.addEventListener("load",function(){a.addEventListener("updateready",function(){a.status===a.UPDATEREADY&&window.location.reload()},!1)},!1)}function f(){if(!h){h=!0;var a=location.href.split("?").shift()+"?share=yes#game",b="英语流利说：测测你的另一半",d="http://api.llsapp.com/ops-activity/images/wechat-logo.png",e="世界杯来了，快来测测你的另一半是哪个球星";WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",{img_url:c.get("worldcup-logo")||d,link:a,desc:c.get("worldcup-result")||e,title:b},function(){})}),WeixinJSBridge.on("menu:share:timeline",function(){WeixinJSBridge.invoke("shareTimeline",{img_url:c.get("worldcup-logo")||d,link:a,desc:c.get("worldcup-result")||e,title:b},function(){})})}}function g(){b.platform.wechat&&(a.__(".download-btns .btn").forEach(function(a){a.setAttribute("href","http://a.app.qq.com/o/simple.jsp?pkgname=com.liulishuo.engzo&g_f=991653")}),document.addEventListener("WeixinJSBridgeReady",f,!1),setTimeout(f,0)),b.isIOS?a._(".download-ios").classList.remove("hidden"):b.isAndroid&&a._(".download-android").classList.remove("hidden"),a._(".share-ad").classList.remove("hidden")}var h=!1;return function(f,h){e();var i=h.params.token,j=h.params.version,k=h.params.appId,l=h.params.deviceId;if(i&&c.set("token",i),j&&c.set("version",j),k&&c.set("app_id",k),l&&c.set("device_id",l),"yes"===h.params.share&&g(),b.isIOS){var m=a._("#ios-relative");m&&m.classList.add("ios-declare")}if(b.isIOS||b.platform.wechat){var n=a._("body > header");n&&(n.style.display="none")}else{var o=a._(".header-left a");o&&o.addEventListener("click",function(a){o.classList.contains("back-to-app")?d.back():window.history.back(),a.preventDefault()},!1)}}}),define("libs/router",["libs/url-parser"],function(a){"use strict";var b=a(location.href),c=b.path;"/"===c.charAt(0)&&(c=c.substr(1)),c.lastIndexOf(".")>=0&&(c=c.substring(0,c.lastIndexOf("."))),""===c&&(c="index");var d={};return{all:function(a){return this.on("_all_",a)},on:function(a,e){return d[a]=!0,(c===a||"_all_"===a)&&"function"==typeof e&&e.call(this,c,b),this},other:function(a){return c in d||"function"==typeof a&&a.call(this,c,b),this}}}),require.config({paths:{zepto:"../bower_components/zepto/zepto",hammer:"../bower_components/hammerjs/hammer"},shim:{zepto:{exports:"Zepto"}}}),require(["libs/stat","init","libs/utils","libs/router"],function(a,b,c,d){"use strict";function e(){}function f(){}d.all(b).on("index",e).on("leaderboard",f).other(e)}),define("main",function(){})}();