!function(){define("libs/env",[],function(){"use strict";var a={},b=location.host;return a.isStaging="staging.llsapp.com"===b,a.isLocal=0===b.indexOf("localhost")||0===b.indexOf("192.168"),a.isOnline=!a.isLocal&&!a.isStaging,a}),define("libs/stat",["libs/env"],function(a){"use strict";var b,c=_gaq,d={};return b={gaTrack:function(b,d,e,f){var g=arguments[arguments.length-1];"string"!=typeof e&&(e=void 0),"number"!=typeof f&&(f=void 0),c&&c.push&&a.isOnline&&c.push(["_trackEvent",b,d,e,f]),"function"==typeof g&&(c&&c.push?setTimeout(g,200):g())},log:function(b,c,d,e,f){var g="http://fcbst.sinaapp.com/log.php?from="+encodeURIComponent(c)+"&type="+encodeURIComponent(b);"undefined"!=typeof d&&(g+="&msg="+encodeURIComponent(d)),"undefined"!=typeof e&&(g+="&data="+encodeURIComponent(JSON.stringify(e))),(a.isOnline||f)&&((new Image).src=g+"&_="+Date.now());var h="Stat#log:\n Category [%s]\n Msg [%s]\n Data [%o]";console[console[b]?b:"log"](h,c,d,e)},remote:function(a,c,d){d=d||{},d.url=location.href,d.ua=navigator.userAgent,b.log(a,"remote message",c,d,!0)}},window.onerror=function(a,c,e){if(!d.onbeforeunload){if("object"==typeof a){var f=a;e=f.line,a=f.message?f.name+": "+f.message:f.toString()}b.log("error","appevent",a,{url:location.href,src:c,line:e,ua:navigator.userAgent})}return!0},window.onbeforeunload=function(){d.onbeforeunload=!0},b}),define("libs/storage",[],function(){"use strict";var a=window.localStorage;return{set:function(b,c){a&&(a[b]=c)},get:function(b){return a&&a[b]},del:function(b){a&&a.removeItem(b)}}}),define("libs/agent",["libs/storage"],function(a){"use strict";var b=navigator.userAgent,c={};return c.isIOS=/iP(ad|hone|od)/.test(b),c.isAndroid=/Android/i.test(b),c.isOthers=!c.isIOS&&!c.isAndroid,c.platform={},c.platform.wechat=/MicroMessenger/i.test(b),c.platform.lls=!!a.get("token"),c}),define("libs/wechat",["libs/stat","libs/agent"],function(a,b){"use strict";function c(c){return"undefined"==typeof WeixinJSBridge?(b.platform.wechat?a.remote("error","WeixinJSBridge not defined"):console.error("WeixinJSBridge not defined"),!1):c()}function d(){var a=[].slice.call(arguments,0);c(function(){WeixinJSBridge.call.apply(WeixinJSBridge,a)})}function e(){var a=[].slice.call(arguments,0);c(function(){WeixinJSBridge.on.apply(WeixinJSBridge,a)})}function f(b,d,e){c(function(){WeixinJSBridge.invoke(b,d,function(c){"function"==typeof e?e(c):e&&a.remote("info","WeixinJSBridge invoke "+b+" callback",{params:d,res:c})})})}function g(b,c,d){if(!(b in i)||"function"!=typeof c)return a.remote("error","wechat _listen error"),!1;var g=i[b];e(g[0],function(){f(g[1],c.call(null,g[0],g[1]),d)})}function h(){var a=j.progress=j.progress||{};if(a.inited)return!1;a.inited=!0,a.events={onLocalImageUploadProgress:{resource:"image",operate:"upload"},onImageDownloadProgress:{resource:"image",operate:"download"},onVoiceUploadProgress:{resource:"voice",operate:"upload"},onVoiceDownloadProgress:{resource:"voice",operate:"download"},onVoicePlayEnd:{resource:"voice",operate:"end"},onVoicePlayBegin:{resource:"voice",operate:"begin"}},a.resources={},a.operates={};var b,c=function(b){return function(){(a.contexts||[]).forEach(function(a){a.resource&&a.resource!==b.resource||a.operate&&a.operate!==b.operate||"function"==typeof a.func&&a.func.apply(b,[].slice.call(arguments,0))})}};for(var d in a.events)b=a.events[d],b.resource&&(a.resources[b.resource]=!0),b.operate&&(a.operates[b.operate]=!0),e(d,c(a.events[d]))}var i={shareToFrient:["menu:share:appmessage","sendAppMessage"],shareToTimeline:["menu:share:timeline","shareTimeline"],shareToWeibo:["menu:share:weibo","shareWeibo"]},j={},k={call:d,invoke:f,shareToFrient:function(a,b){g("shareToFrient",a,b)},shareToTimeline:function(a,b){g("shareToTimeline",a,b)},shareToWeibo:function(a,b){g("shareToWeibo",a,b)},getNetworkType:function(a){f("getNetworkType",{},function(b){var c=b.err_msg.split(":");c&&(c=c[1]),a&&a(c)})},close:function(){d("closeWindow")},hideOptionMenu:function(){d("hideOptionMenu")},showOptionMenu:function(){d("showOptionMenu")},hideToolbar:function(){d("hideToolbar")},showToolbar:function(){d("showToolbar")},on:function(){var a=j.progress=j.progress||{};a.inited||h();var b={},c=[].slice.call(arguments,0);c.forEach(function(c){"string"==typeof c?(a.resources[c]&&(b.resource=c),a.operates[c]&&(b.operate=c)):"function"==typeof c&&(b.func=c)}),b.func&&(a.contexts=a.contexts||[],a.contexts.push(b))},off:function(){var a=j.progress=j.progress||{};if(a.inited||h(),0!==a.contexts.length){if(0===arguments.length)return void(a.contexts=[]);var b={};[].slice.call(arguments,0).forEach(function(c){"string"==typeof c?(a.resources[c]&&(b.resource=c),a.operates[c]&&(b.operate=c)):"function"==typeof c&&(b.func=c)});for(var c=a.contexts.length-1;c>=0;--c){var d=a.contexts[c];b.resource&&d.resource!==b.resource||b.operate&&d.operate!==b.operate||b.func&&d.func!==b.func||a.contexts.splice(c,1)}}}};return k}),require.config({paths:{zepto:"../bower_components/zepto/zepto",hammer:"../bower_components/hammerjs/hammer"},shim:{zepto:{exports:"Zepto"}}}),require(["libs/stat","libs/wechat"],function(a,b){"use strict";function c(a,b){a.addEventListener("click",function(a){a.preventDefault(),b()})}function d(a,b){"object"==typeof b&&(b=JSON.stringify(b)),a.innerText=b}function e(a){d(j,a)}function f(a){d(k,a)}var g,h,i="wx9fce185521717341",j=document.getElementById("log"),k=document.getElementById("status"),l=document.getElementById("record"),m=document.getElementById("upload"),n=document.getElementById("control"),o=document.getElementById("download");c(l,function(){b.invoke("startRecord",{appId:i},function(b){e(b),a.remote("info","startRecord",b),g=b.localId})}),c(m,function(){if(!g)return a.remote("error","Please record voice first!"),e("Please record voice first!"),!1;var c={appId:i,localId:g};b.invoke("uploadVoice",c,function(b){b.serverId&&(h=b.serverId);var d={res:b,params:c};e(d),a.remote("info","uploadVoiceResult",d)})}),c(o,function(){if(!h)return a.remote("error","Please upload voice first!"),e("Please upload voice first!"),!1;var c={appId:i,serverId:h};b.invoke("downloadVoice",c,function(b){b.localId&&(g=b.localId);var d={res:b,params:c};e(d),a.remote("info","downloadVoiceResult",d)})});var p=0;f(p),c(n,function(){var a={appId:i,localId:g};b.invoke("playVoice",a,function(a){e(a)})})}),define("weixin",function(){})}();